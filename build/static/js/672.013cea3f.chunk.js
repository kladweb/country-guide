"use strict";(self.webpackChunkcountry_guide_git=self.webpackChunkcountry_guide_git||[]).push([[672],{1672:(e,t,n)=>{n.r(t),n.d(t,{CountriesList:()=>p});var s=n(2791),o=n(9224),r=n(549);var i=n(184);const l=e=>{let{code:t,name:n,isFav:o,deleteFavCountry:l,toggleFav:a,openInfo:c}=e;const u=s.useRef(null),[d,g]=(0,s.useState)(!1),[C,h]=(0,s.useState)(o);return(0,i.jsx)(r.Z,{timeout:700,nodeRef:u,classNames:"land",in:!d,onExited:()=>a(t,C,h),children:(0,i.jsx)("div",{ref:u,className:"Country",children:(0,i.jsxs)("div",{className:"flag-frame".concat(o&&C?" isFav":""),children:[(0,i.jsx)("img",{className:"flag-preview",src:"/img/flags/".concat(t,".png"),alt:n}),(0,i.jsx)("span",{className:"country-title ".concat(n.length>24?"country-title__small":null),children:n}),(0,i.jsxs)("div",{className:"CountryLinks",children:[(0,i.jsx)("div",{className:"CountryInfo",children:(0,i.jsx)("button",{className:"CountryInfo__title",onClick:()=>c(t),children:"Information"})}),(0,i.jsxs)("button",{className:"CountryInfo__title",onClick:()=>{l(t,C,h,g)},children:[(0,i.jsx)("span",{children:"Visited"}),(0,i.jsx)("div",{className:"icon",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"17",width:"17",children:(0,i.jsx)("path",{d:"M14.1891 6.37042L10.2219 5.79385L8.44847 2.19854C8.40003 2.1001 8.32034 2.02042 8.2219\r 1.97198C7.97503 1.8501 7.67503 1.95167 7.55159 2.19854L5.77815 5.79385L1.81097 6.37042C1.70159 6.38604\r 1.60159 6.4376 1.52503 6.51573C1.43247 6.61086 1.38146 6.73885 1.38322 6.87157C1.38498 7.0043 1.43936\r 7.13089 1.5344 7.22354L4.40472 10.022L3.72659 13.9735C3.71069 14.0655 3.72086 14.16 3.75595\r 14.2464C3.79105 14.3329 3.84966 14.4077 3.92514 14.4626C4.00062 14.5174 4.08995 14.55 4.183\r 14.5566C4.27605 14.5632 4.3691 14.5437 4.45159 14.5001L8.00003 12.6345L11.5485 14.5001C11.6453\r 14.5517 11.7578 14.5689 11.8657 14.5501C12.1375 14.5032 12.3203 14.2454 12.2735 13.9735L11.5953\r 10.022L14.4657 7.22354C14.5438 7.14698 14.5953 7.04698 14.611 6.9376C14.6532 6.66417 14.4625\r 6.41104 14.1891 6.37042Z",fill:o&&C?"yellow":"none",stroke:o&&C?"yellow":"#FFF",className:"icon-star-path"})})})]})]})]})})})};var a=n(714),c=n(4944),u=n(5027),d=n(7097),g=n(763);const C="rgba(20,161,20,.78)",h="rgba(246,173,85,.8)",m="#b1091d",f=e=>{let{parentWidth:t,listCountries:n}=e;const[o,r]=(0,s.useState)([]),l=(0,s.useRef)(null);return(0,s.useLayoutEffect)((()=>{l.current.controls().enableZoom=!1,fetch("/datasets/ne_110m_admin_0_countries.geojson").then((e=>e.json())).then((e=>{r(e.features)}))}),[t]),(0,i.jsx)(g.Z,{ref:l,width:t,height:t<900?t:900,polygonsData:o,polygonCapColor:e=>n.includes(e.properties.ISO_A2.toLowerCase())?m:C,polygonSideColor:()=>h,polygonStrokeColor:()=>h,polygonAltitude:()=>.03,globeImageUrl:"/img/shared/earth-day.jpg",backgroundColor:"rgba(0,0,0,0)",labelsData:o,labelText:e=>e.properties.ISO_A2,labelColor:"blue"})},p=()=>{const e=(0,o.s0)(),t=(0,u.TL)(),n=(0,o.UO)(),{writeUserCountries:r}=(0,d.W)(),g=(0,u.CG)((e=>e.favCountries.data)),C=(0,u.CG)((e=>e.countries)),h=(0,u.CG)((e=>e.currUser.currUser)),m=C.data,p=C.currentData?C.currentData:[],v=m?m.filter((e=>g.includes(e.code))):[],j=n.part,x="visited"===j,y=x?v:p,w=(0,s.useRef)(null),[L,_]=(0,s.useState)(0),b=()=>{_(w.current.getBoundingClientRect().width)};(0,s.useLayoutEffect)((()=>(w.current&&b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)})),[]);const N=function(e,t,n,s){"visited"===j?(n(!t),setTimeout((()=>{s(!0)}),100)):F(e,t,n)},F=function(n,s,o){if(h){o(!s);let e=[...g];e.includes(n)?e=g.filter((e=>e!==n)):e.push(n),t((0,c.w2)(e)),r(JSON.stringify(e))}else e("/login")},k=s=>{n.countid&&n.countid===s?t((0,a.nw)("close")):(n.countid||t((0,a.nw)("open")),e("/countries/".concat(j,"/")+s))},I=y.map((e=>(0,i.jsx)(l,{code:e.code,name:e.name,isFav:g.includes(e.code),deleteFavCountry:N,toggleFav:F,openInfo:k},e.code)));return console.log(x),console.log(L),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{ref:w,className:"CountriesGroup",children:[x&&(0,i.jsx)(i.Fragment,{children:y.length<=0&&(0,i.jsx)("p",{className:"navPages",children:"The list of visited countries is empty..."})}),I,(0,i.jsx)(o.j3,{}),x&&(0,i.jsx)("div",{className:"globe_container",children:(0,i.jsx)(f,{listCountries:y.map((e=>e.code)),parentWidth:L})})]})})}}}]);
//# sourceMappingURL=672.013cea3f.chunk.js.map