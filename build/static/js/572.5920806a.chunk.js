/*! For license information please see 572.5920806a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcountry_guide_git=self.webpackChunkcountry_guide_git||[]).push([[572],{572:(e,t,a)=>{a.r(t),a.d(t,{PageLoginLogout:()=>y});var n=a(43),o=a(898),s=a(594),i=a(202),r=a(8),l=a(666);var c=a(579);const u=e=>{let{loginGoogle:t}=e;return(0,c.jsxs)("button",{className:"loginButton",onClick:t,children:[(0,c.jsx)("img",{className:"google-logo",src:"/img/shared/google_icon.png",alt:"google icon"}),(0,c.jsx)("span",{className:"google-span",children:"Login with Google"})]})};var d=a(527);const p=e=>{let{setShowMod:t,logoutGoogle:a,isClearData:o,deleteUserData:s}=e;const i=n.useRef(null),[r,l]=(0,n.useState)(!0),[u,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l(!1),p(!1)},[]);const m=()=>{l(!0)};return(0,c.jsx)(d.A,{timeout:300,nodeRef:i,classNames:"land",in:!r,onExited:()=>{t(!1),u&&(o&&s(),a())},mountOnEnter:!0,unmountOnExit:!0,children:(0,c.jsx)("div",{ref:i,className:"modal",onClick:()=>{l(!0)},children:(0,c.jsxs)("div",{className:"modal-logout",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("span",{className:"button-close material-icons-outlined",onClick:m,children:"close"}),o?(0,c.jsxs)("div",{className:"modal-question",children:["Do yo want to logout",(0,c.jsx)("br",{}),"and clear all data?"]}):(0,c.jsx)("div",{className:"modal-question",children:"Do yo want to logout?"}),(0,c.jsx)("button",{onClick:()=>{p(!0),l(!0)},children:"YES"}),(0,c.jsx)("button",{onClick:m,children:"NO"})]})})})};var m=a(104);const g=e=>{let{userName:t,setInput:a}=e;const o=(0,i.jL)(),{writeUserName:s}=(0,m.t)(),[l,u]=(0,n.useState)(t),d=()=>{a(!1),""!==l&&(s(l),o((0,r.ht)(l)))};return(0,c.jsx)("input",{name:"userName",className:"inputName",autoFocus:!0,type:"text",value:l,onChange:e=>{u(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&d()},onBlur:d})},h=e=>{let{logoutGoogle:t,userName:a}=e;const{readAllUsers:o}=(0,m.t)(),s=(0,i.jL)(),{writeUserPermissionVisited:l,writeUserCountries:u}=(0,m.t)(),d=(0,i.GV)(e=>e.currUser.isAllowShowVisited),[h,N]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),[b,_]=(0,n.useState)(!1),j=e=>{"clear"===e.target.name?v(!0):v(!1),N(!0)};return(0,c.jsxs)("div",{className:"userPage",children:[h&&(0,c.jsx)(p,{setShowMod:N,logoutGoogle:t,isClearData:f,deleteUserData:()=>{u(null),l(null)}}),(0,c.jsx)("div",{className:"userNameWrapper",children:b?(0,c.jsx)(g,{userName:a,setInput:_}):(0,c.jsx)("h2",{className:"currentUserName",onDoubleClick:()=>{_(!0)},children:a})}),(0,c.jsxs)("div",{className:"isAllowShowVisited",children:[null!==d&&(0,c.jsx)("input",{className:"shareInput",type:"checkbox",defaultChecked:d,onChange:()=>{l(!d),s((0,r.Dd)(!d)),o(s)}}),(0,c.jsx)("span",{className:"shareDescription",children:"allow other users to see the countries I have visited."})]}),(0,c.jsx)("button",{className:"logoutButton",onClick:j,children:"Logout"}),(0,c.jsx)("button",{className:"logoutButton logoutClear",name:"clear",onClick:j,children:"Logout and clear data"})]})};var N=a(529),f=a(812),v=a(150),b=a(443);class _{constructor(e,t){this._delegate=e,this.firebase=t,(0,v._addComponent)(e,new f.uA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,v.deleteApp)(this._delegate)))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v._DEFAULT_ENTRY_NAME;var a;this._delegate.checkDestroyed();const n=this._delegate.container.getProvider(e);return n.isInitialized()||"EXPLICIT"!==(null===(a=n.getComponent())||void 0===a?void 0:a.instantiationMode)||n.initialize(),n.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,v._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,v._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const j={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},C=new N.FA("app-compat","Firebase",j);const w=function e(){const t=function(e){const t={},a={__esModule:!0,initializeApp:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=v.initializeApp(n,o);if((0,N.gR)(t,s.name))return t[s.name];const i=new e(s,a);return t[s.name]=i,i},app:n,registerVersion:v.registerVersion,setLogLevel:v.setLogLevel,onLog:v.onLog,apps:null,SDK_VERSION:v.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,s=o.replace("-compat","");if(v._registerComponent(t)&&"PUBLIC"===t.type){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n();if("function"!==typeof e[s])throw C.create("invalid-app-argument",{appName:o});return e[s]()};void 0!==t.serviceProps&&(0,N.zw)(i,t.serviceProps),a[s]=i,e.prototype[s]=function(){const e=this._getService.bind(this,o);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e.apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?a[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:v}};function n(e){if(e=e||v._DEFAULT_ENTRY_NAME,!(0,N.gR)(t,e))throw C.create("no-app",{appName:e});return t[e]}return a.default=a,Object.defineProperty(a,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),n.App=e,a}(_);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,N.zw)(t,e)},createSubscribe:N.tD,ErrorFactory:N.FA,deepExtend:N.zw}),t}(),x=new b.Vy("@firebase/app-compat");try{const e=(0,N.mS)();if(void 0!==e.firebase){x.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&x.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(L){}const A=w;var E;(0,v.registerVersion)("@firebase/app-compat","0.4.2",E);A.registerVersion("firebase","11.10.0","app-compat");a(800);const y=()=>{const e=(0,i.jL)(),{writeUserName:t,writeUserPhoto:a}=(0,m.t)(),d=(0,i.GV)(e=>e.currUser.currUser),p=(0,i.GV)(e=>e.currUser.userName),g=new o.HF;(0,n.useEffect)(()=>{d&&""===p&&(t(d.displayName),e((0,r.ht)(d.displayName))),d&&(a(d.photoURL),e((0,r.yw)(d.photoURL)))},[p]);return(0,c.jsx)("div",{className:"travelers",children:(0,c.jsx)("div",{className:"content",children:d?(0,c.jsx)(h,{logoutGoogle:function(){(0,o.CI)(s.j).then(()=>{console.log("Sign-out successful",s.j.currentUser),e((0,r.AF)({currUser:s.j.currentUser})),e((0,l.ZS)([]))}).catch(e=>{console.log("Sign-out error",e)})},userName:p}):(0,c.jsx)(u,{loginGoogle:function(){(0,o.df)(s.j,g).then(t=>{const a=s.j.currentUser,n={email:a.email?a.email:"",displayName:a.displayName?a.displayName:"",photoURL:a.photoURL?a.photoURL:"",id:a.email?a.email.replace(/[@.]/g,""):a.uid,uid:a.uid};return e((0,r.AF)({currUser:n})),n.uid}).catch(t=>{console.log(t),e((0,l.ZS)([]))})}})})})}},800:()=>{}}]);
//# sourceMappingURL=572.5920806a.chunk.js.map