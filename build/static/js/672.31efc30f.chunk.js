"use strict";(self.webpackChunkcountry_guide_git=self.webpackChunkcountry_guide_git||[]).push([[672],{1672:(e,t,s)=>{s.r(t),s.d(t,{CountriesList:()=>f});var n=s(2791),o=s(9224),r=s(549);var a=s(184);const i=e=>{let{code:t,name:s,isFav:o,deleteFavCountry:i,toggleFav:l,openInfo:c}=e;const d=n.useRef(null),[u,g]=(0,n.useState)(!1),[C,h]=(0,n.useState)(o);return(0,a.jsx)(r.Z,{timeout:700,nodeRef:d,classNames:"land",in:!u,onExited:()=>l(t,C,h),children:(0,a.jsx)("div",{ref:d,className:"Country",children:(0,a.jsxs)("div",{className:"flag-frame".concat(o&&C?" isFav":""),children:[(0,a.jsx)("img",{className:"flag-preview",src:"/img/flags/".concat(t,".png"),alt:s}),(0,a.jsx)("span",{className:"country-title ".concat(s.length>24?"country-title__small":null),children:s}),(0,a.jsxs)("div",{className:"CountryLinks",children:[(0,a.jsx)("div",{className:"CountryInfo",children:(0,a.jsx)("button",{className:"CountryInfo__title",onClick:()=>c(t),children:"Information"})}),(0,a.jsxs)("button",{className:"CountryInfo__title",onClick:()=>{i(t,C,h,g)},children:[(0,a.jsx)("span",{children:"Visited"}),(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"17",width:"17",children:(0,a.jsx)("path",{d:"M14.1891 6.37042L10.2219 5.79385L8.44847 2.19854C8.40003 2.1001 8.32034 2.02042 8.2219\r 1.97198C7.97503 1.8501 7.67503 1.95167 7.55159 2.19854L5.77815 5.79385L1.81097 6.37042C1.70159 6.38604\r 1.60159 6.4376 1.52503 6.51573C1.43247 6.61086 1.38146 6.73885 1.38322 6.87157C1.38498 7.0043 1.43936\r 7.13089 1.5344 7.22354L4.40472 10.022L3.72659 13.9735C3.71069 14.0655 3.72086 14.16 3.75595\r 14.2464C3.79105 14.3329 3.84966 14.4077 3.92514 14.4626C4.00062 14.5174 4.08995 14.55 4.183\r 14.5566C4.27605 14.5632 4.3691 14.5437 4.45159 14.5001L8.00003 12.6345L11.5485 14.5001C11.6453\r 14.5517 11.7578 14.5689 11.8657 14.5501C12.1375 14.5032 12.3203 14.2454 12.2735 13.9735L11.5953\r 10.022L14.4657 7.22354C14.5438 7.14698 14.5953 7.04698 14.611 6.9376C14.6532 6.66417 14.4625\r 6.41104 14.1891 6.37042Z",fill:o&&C?"yellow":"none",stroke:o&&C?"yellow":"#FFF",className:"icon-star-path"})})})]})]})]})})})};var l=s(714),c=s(4944),d=s(5027),u=s(7097),g=s(763);const C="rgba(20,161,20,.78)",h="rgba(246,173,85,.8)",m="#b1091d",p=e=>{let{parentWidth:t,listCodes:s,listNames:o}=e;const[r,i]=(0,n.useState)([]),l=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{l.current.controls().enableZoom=!1,fetch("/datasets/ne_110m_admin_0_countries.geojson").then((e=>e.json())).then((e=>{i(e.features)}))}),[t]),(0,a.jsx)(g.Z,{ref:l,width:t,height:t<900?t:900,polygonsData:r,polygonCapColor:e=>(console.log(e.properties),s.includes(e.properties.ISO_A2.toLowerCase())||o.includes(e.properties.BRK_NAME.toLowerCase())?m:C),polygonSideColor:()=>h,polygonStrokeColor:()=>h,polygonAltitude:()=>.02,globeImageUrl:"/img/shared/earth-day.jpg",backgroundColor:"rgba(0,0,0,0)",labelsData:r,labelText:e=>e.properties.ISO_A2,labelColor:"blue"})},f=()=>{const e=(0,o.s0)(),t=(0,d.TL)(),s=(0,o.UO)(),{writeUserCountries:r}=(0,u.W)(),g=(0,d.CG)((e=>e.favCountries.data)),C=(0,d.CG)((e=>e.countries)),h=(0,d.CG)((e=>e.currUser.currUser)),m=C.data,f=C.currentData?C.currentData:[],v=m?m.filter((e=>g.includes(e.code))):[],j=s.part,x="visited"===j,w=x?v:f,y=(0,n.useRef)(null),[L,N]=(0,n.useState)(0),_=()=>{N(y.current.getBoundingClientRect().width)};(0,n.useLayoutEffect)((()=>(y.current&&_(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)})),[]);const b=function(e,t,s,n){"visited"===j?(s(!t),setTimeout((()=>{n(!0)}),100)):F(e,t,s)},F=function(s,n,o){if(h){o(!n);let e=[...g];e.includes(s)?e=g.filter((e=>e!==s)):e.push(s),t((0,c.w2)(e)),r(JSON.stringify(e))}else e("/login")},k=n=>{s.countid&&s.countid===n?t((0,l.nw)("close")):(s.countid||t((0,l.nw)("open")),e("/countries/".concat(j,"/")+n))},I=w.map((e=>(0,a.jsx)(i,{code:e.code,name:e.name,isFav:g.includes(e.code),deleteFavCountry:b,toggleFav:F,openInfo:k},e.code)));return console.log(w),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{ref:y,className:"CountriesGroup",children:[x&&(0,a.jsx)(a.Fragment,{children:w.length<=0&&(0,a.jsx)("p",{className:"navPages",children:"The list of visited countries is empty..."})}),I,(0,a.jsx)(o.j3,{}),x&&(0,a.jsx)("div",{className:"globe_container",children:(0,a.jsx)(p,{listCodes:w.map((e=>e.code.toLowerCase())),listNames:w.map((e=>e.name.toLowerCase())),parentWidth:L})})]})})}}}]);
//# sourceMappingURL=672.31efc30f.chunk.js.map